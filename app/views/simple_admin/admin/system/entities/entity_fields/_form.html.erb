<%= form_for form_resource, url: form_url, html: { class: 'form-horizontal' }, remote: true do |f| %>
  <section class="field">
    <div class="field__title">Name</div>
    <div class="field__content">
        <div class="select__wrapper">
          <%= f.select :name, resource.model_klass_name.constantize.column_names.map { |cn| [cn, cn] }, { selected: form_resource.name }, { class: 'select' } %>
        </div>
    </div>
  </section>

  <section class="field">
    <div class="field__title">Label</div>
    <div class="field__content">
      <%= f.text_field :label, class: 'input' %>
    </div>
  </section>

  <section class="field">
    <div class="field__title">Type</div>
    <div class="field__content">
        <div class="select__wrapper">
          <%= f.select :entity_field_type_id, SimpleAdmin::EntityFieldType.all.collect { |ft| [ft.name, ft.id] }, {}, { class: 'select' } %>
        </div>
    </div>
  </section>

  <section class="field">
    <div class="field__title">Presentation</div>
    <div class="field__content">
        <div class="select__wrapper">
          <%= f.select :presentation, SimpleAdmin::EntityField.presentations.keys, {}, { class: 'select' } %>
        </div>
    </div>
  </section>

  <%= f.hidden_field :entity_id, value: resource.to_param %>

  <% if form_resource.entity_field_setting.present? %>
    <%= f.fields_for :entity_field_setting do |ef| %>
      <section class="field">
        <div class="field__title">Relation Attribute</div>
        <div class="field__content">
          <%= ef.text_field :value, class: 'input' %>
        </div>
      </section>
    <% end %>
  <% end %>

  <% if form_resource.persisted? %>
    <section class="field">
      <div class="field__title"></div>
      <div class="field__content">
        <%= f.submit class: 'button button--wide item-page__button' %>
        <%= link_to 'Delete', admin_system_entity_field_path(form_resource), class: 'button button--wide item-page__button', method: :delete, remote: true, data: { confirm: 'Are you sure?' } %>
      </div>
    </section>
  <% else %>
    <section class="field">
      <div class="field__title"></div>
      <div class="field__content">
        <%= f.submit class: 'button button--wide item-page__button' %>
      </div>
    </section>
  <% end %>
<% end %>
